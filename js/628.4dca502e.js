(globalThis["webpackChunktamponati_client"]=globalThis["webpackChunktamponati_client"]||[]).push([[628],{3245:(e,a,t)=>{"use strict";t.d(a,{Z:()=>l,e:()=>i});var o=t(4562);const l={id:null,nomecompleto:"",tipo:null},i=(0,o.r8)((()=>(0,o.y$)("vue-tamponati",{...l},sessionStorage)))},1641:(e,a,t)=>{"use strict";t.d(a,{Z:()=>h});var o=t(3673),l=t(8880);function i(e,a,t,i,r,n){const s=(0,o.up)("q-input"),u=(0,o.up)("q-select"),p=(0,o.up)("q-btn"),m=(0,o.up)("q-stepper-navigation"),d=(0,o.up)("q-step"),c=(0,o.up)("q-stepper"),g=(0,o.up)("q-form");return(0,o.wg)(),(0,o.j4)(g,{onSubmit:(0,l.iM)(e.saveForm,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:e.step,"onUpdate:modelValue":a[12]||(a[12]=a=>e.step=a),vertical:"",color:"primary",animated:"",class:"q-mx-auto q-pa-lg",style:{width:"30rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:1,title:"Anagrafica",done:e.step>1},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.register.nome,"onUpdate:modelValue":a[1]||(a[1]=a=>e.register.nome=a),outlined:"",label:"Nome Laboratorio",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(s,{modelValue:e.register.indirizzo,"onUpdate:modelValue":a[2]||(a[2]=a=>e.register.indirizzo=a),outlined:"",label:"Indirizzo, numero",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(s,{modelValue:e.register.piva,"onUpdate:modelValue":a[3]||(a[3]=a=>e.register.piva=a),outlined:"",label:"Partita IVA",mask:"###########",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(u,{modelValue:e.register.provincia,"onUpdate:modelValue":a[4]||(a[4]=a=>e.register.provincia=a),outlined:"","emit-value":"","map-options":"",options:e.optionsProvince,label:"Provincia",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","options","rules"]),(0,o.Wm)(s,{modelValue:e.register.citta,"onUpdate:modelValue":a[5]||(a[5]=a=>e.register.citta=a),outlined:"",label:"Comune",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(s,{modelValue:e.register.cap,"onUpdate:modelValue":a[6]||(a[6]=a=>e.register.cap=a),outlined:"",label:"CAP",mask:"#####",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[e.dati?((0,o.wg)(),(0,o.j4)(p,{key:0,type:"submit",color:"primary",label:"Aggiorna Profilo"})):((0,o.wg)(),(0,o.j4)(p,{key:1,color:"primary",label:"Continua",onClick:a[7]||(a[7]=a=>e.step=2)}))])),_:1})])),_:1},8,["done"]),e.dati?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(d,{key:0,name:2,title:"Email e Password",done:e.step>2},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:e.register.email,"onUpdate:modelValue":a[8]||(a[8]=a=>e.register.email=a),outlined:"",label:"Email",type:"email",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(s,{modelValue:e.register.password,"onUpdate:modelValue":a[9]||(a[9]=a=>e.register.password=a),outlined:"",type:"password",label:"Password",rules:[e=>!!e||"Campo Richiesto"]},null,8,["modelValue","rules"]),(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"submit",color:"primary",label:e.Registrati,onClick:a[10]||(a[10]=a=>e.step=2)},null,8,["label"]),(0,o.Wm)(p,{flat:"",color:"primary",label:"Indietro",class:"q-ml-sm",onClick:a[11]||(a[11]=a=>e.step=1)})])),_:1})])),_:1},8,["done"]))])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])}var r=t(1959),n=t(8825),s=t(2490),u=t(9582);const p=(0,o.aZ)({name:"RegisterLaboratorio",props:{dati:{type:Object,default:null}},setup(e){const a=(0,u.tv)(),t=(0,n.Z)(),o=(0,r.iH)({}),l=(0,r.iH)([]);s.db.collection("province").get().then((e=>{const a=[];e.forEach((e=>{a.push(e.data())})),l.value=a})),e.dati&&(o.value={...e.dati});const i=async()=>{try{const e=await s.auth.createUserWithEmailAndPassword(o.value.email,o.value.password),t=e.user;await s.db.collection("users").doc(t.uid).set({tipo_utente:4,nome:o.value.nome,piva:o.value.piva,indirizzo:o.value.indirizzo,provincia:o.value.provincia,citta:o.value.citta,cap:o.value.cap,email:t.email,uid:t.uid}),a.push("/login")}catch(e){t.notify({type:"negative",position:"top",message:"Laboratorio giÃ  registrato!"}),console.log(e)}},p=async()=>{try{await s.db.collection("users").doc(o.value.uid).update({tipo_utente:4,nome:o.value.nome,piva:o.value.piva,indirizzo:o.value.indirizzo,provincia:o.value.provincia,citta:o.value.citta,cap:o.value.cap}),t.notify({type:"positive",position:"top",message:"Anagrafica Aggiornata!"})}catch(e){t.notify({type:"negative",position:"top",message:"Errore salvataggio dati!"}),console.log(e)}},m=()=>{e.dati?p():i()};return{step:(0,r.iH)(1),saveForm:m,register:o,optionsProvince:l}}});var m=t(8689),d=t(3518),c=t(4340),g=t(4842),v=t(9396),b=t(118),V=t(8240),y=t(7518),w=t.n(y);p.render=i;const h=p;w()(p,"components",{QForm:m.Z,QStepper:d.Z,QStep:c.Z,QInput:g.Z,QSelect:v.Z,QStepperNavigation:b.Z,QBtn:V.Z})},1628:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>y});var o=t(3673);const l={class:"text-center",style:{"font-size":"1.2rem"}},i=(0,o.Wm)("br",null,null,-1),r=(0,o.Uk)("Laboratorio");function n(e,a,t,n,s,u){const p=(0,o.up)("q-icon"),m=(0,o.up)("q-separator"),d=(0,o.up)("register-laboratorio"),c=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(c,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",l,[(0,o.Wm)(p,{name:"biotech",size:"md"}),i,r]),(0,o.Wm)(m),(0,o.Wm)(d,{dati:e.dati,class:"q-mt-md"},null,8,["dati"])])),_:1})}var s=t(1641),u=t(1959),p=t(2490),m=t(3245);const d=(0,o.aZ)({name:"RegisterPage",components:{RegisterLaboratorio:s.Z},setup(){const e=(0,u.iH)({}),a=(0,m.e)();return p.db.collection("users").doc(a.value.id).get().then((a=>{a.exists&&(e.value=a.data())})),{dati:e}}});var c=t(4379),g=t(4554),v=t(5869),b=t(7518),V=t.n(b);d.render=n;const y=d;V()(d,"components",{QPage:c.Z,QIcon:g.Z,QSeparator:v.Z})}}]);